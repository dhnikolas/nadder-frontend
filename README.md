# Nadder Frontend

Аналог Notion для управления проектами и задачами - React приложение с Kanban доской.

## Описание

Nadder - это веб-приложение для управления проектами, построенное на React с использованием TypeScript. Приложение предоставляет:

- **Аутентификация**: Регистрация и вход пользователей
- **Управление проектами**: Создание, выбор и управление проектами
- **Pipeline**: Создание и настройка рабочих процессов
- **Kanban доска**: Визуальное управление задачами с drag & drop
- **Статусы**: Гибкая система статусов для задач
- **Карточки**: Создание и редактирование задач

## Технологии

- **React 18** - Основной фреймворк
- **TypeScript** - Типизация
- **Tailwind CSS** - Стилизация
- **React Router** - Маршрутизация
- **Axios** - HTTP клиент
- **React Beautiful DnD** - Drag & Drop функциональность
- **Lucide React** - Иконки
- **Electron** - Desktop приложение (macOS)

## Структура проекта

```
src/
├── components/          # React компоненты
│   ├── auth/           # Компоненты аутентификации
│   ├── projects/       # Управление проектами
│   ├── pipelines/      # Управление pipeline
│   └── kanban/         # Kanban доска
├── contexts/           # React контексты
├── services/           # API сервисы
├── types/              # TypeScript типы
└── App.tsx             # Главный компонент
```

## Установка и запуск

### Предварительные требования

- Node.js 16+ 
- npm или yarn

### Установка зависимостей

```bash
npm install
```

### Запуск в режиме разработки

```bash
npm start
```

Приложение будет доступно по адресу [http://localhost:3000](http://localhost:3000).

### Сборка для продакшена (Web)

```bash
npm run build
# или
npm run build:web
```

Собранные файлы будут в папке `build/`.

## Desktop версия (macOS)

Приложение также доступно как нативное macOS приложение, созданное с помощью Electron.

### Установка зависимостей для Desktop

```bash
npm install
```

### Запуск Desktop версии в режиме разработки

```bash
npm run electron:dev
```

Эта команда запустит React dev server и Electron приложение одновременно.

### Сборка Desktop приложения для macOS

```bash
npm run electron:build:mac
```

Эта команда:
1. Соберет React приложение с API URL `https://nadder.ru/api/v1`
2. Создаст macOS приложение (.app, .dmg, .zip)

Собранное приложение будет находиться в папке `dist-electron/` в форматах:
- `.dmg` - установщик для macOS (x64 и arm64)
- `.zip` - архив с приложением

### Запуск собранного Desktop приложения

После сборки вы можете:
1. Открыть `.dmg` файл и перетащить приложение в папку Applications
2. Или распаковать `.zip` и запустить приложение напрямую

**Примечание:** При первом запуске macOS может показать предупреждение о безопасности. В этом случае:
- Перейдите в Системные настройки → Безопасность и конфиденциальность
- Нажмите "Открыть в любом случае" рядом с предупреждением

### Генерация и установка иконки приложения

Иконка приложения (буква N на синем фоне) используется как для Desktop (macOS), так и для Web версии. Иконка генерируется автоматически при сборке, но вы можете пересоздать её вручную:

#### Автоматическая генерация

```bash
# Создать все файлы иконки (SVG, PNG, ICNS, веб-иконки)
node scripts/generate-icon.js
```

Эта команда автоматически создаст:
- SVG иконку
- PNG иконку (1024x1024)
- Веб-иконки (favicon, apple-touch-icon, android-chrome и т.д.)

Для Desktop версии дополнительно создайте ICNS:
```bash
node scripts/create-icon-icns.js
```

Или одной командой для полной генерации:
```bash
node scripts/generate-icon.js && node scripts/create-icon-icns.js
```

#### Что создается

1. **SVG иконка** (`build/icons/icon.svg`) - исходный файл с буквой N на синем фоне
2. **PNG иконка** (`build/icons/icon.png`) - растровое изображение 1024x1024
3. **ICNS иконка** (`assets/icons/icon.icns`) - macOS иконка со всеми необходимыми размерами

#### Структура файлов

```
build/icons/
├── icon.svg          # Исходный SVG файл
├── icon.png          # PNG 1024x1024
├── icon.icns         # macOS иконка
└── icon.iconset/     # Временная папка с размерами

assets/icons/
├── icon.png          # Копия PNG
└── icon.icns         # Копия ICNS (используется electron-builder)

public/
├── favicon.ico       # Favicon для веб-версии
└── icons/
    ├── favicon-16x16.png
    ├── favicon-32x32.png
    ├── favicon-96x96.png
    ├── apple-touch-icon.png (180x180)
    ├── android-chrome-192x192.png
    └── android-chrome-512x512.png
```

#### Настройка иконки

Чтобы изменить дизайн иконки, отредактируйте файл `scripts/generate-icon.js`:
- Измените цвет фона: `fill="#3B82F6"` (синий)
- Измените цвет буквы: `fill="white"`
- Измените размер буквы: `font-size="700"`
- Измените шрифт: `font-family="Arial, sans-serif"`

После изменений пересоздайте иконку командами выше.

#### Применение иконки

Иконка автоматически применяется при сборке приложения:
```bash
npm run electron:build:mac
```

Если иконка не обновилась после установки:
1. Удалите старое приложение из папки Applications
2. Очистите кеш иконок macOS:
   ```bash
   sudo killall Finder
   # или
   sudo rm -rf /Library/Caches/com.apple.iconservices.store
   ```
3. Установите новое приложение заново

## API

Приложение работает с бэкендом по адресу `https://nadder.ru/api/v1` (production) или `http://localhost:8082/api/v1` (development).

### Основные эндпоинты

- **Аутентификация**: `/auth/login`, `/auth/register`
- **Проекты**: `/projects`
- **Pipeline**: `/projects/{id}/pipelines`
- **Статусы**: `/projects/{id}/pipelines/{id}/statuses`
- **Карточки**: `/projects/{id}/pipelines/{id}/statuses/{id}/cards`

## Функциональность

### 1. Аутентификация
- Регистрация новых пользователей
- Вход в систему
- JWT токены для авторизации

### 2. Управление проектами
- Создание новых проектов
- Выбор активного проекта
- Выпадающий список проектов

### 3. Pipeline
- Создание рабочих процессов
- Настройка цветов
- Drag & Drop для изменения порядка

### 4. Kanban доска
- Создание статусов с цветовой кодировкой
- Drag & Drop карточек между статусами
- Создание и редактирование карточек
- Перемещение карточек между статусами

### 5. Карточки
- Название и описание
- Редактирование на месте
- Удаление с подтверждением

## Особенности

- **Responsive дизайн** - Адаптация под различные устройства
- **Drag & Drop** - Интуитивное управление элементами
- **Цветовая кодировка** - Визуальное различение статусов и pipeline
- **Реальное время** - Мгновенное обновление при изменениях
- **Валидация** - Проверка данных на клиенте и сервере

## Разработка

### Добавление новых компонентов

1. Создайте файл в соответствующей папке `src/components/`
2. Определите TypeScript интерфейсы
3. Добавьте стили с помощью Tailwind CSS
4. Протестируйте функциональность

### Работа с API

Все API вызовы централизованы в `src/services/api.ts`. Для добавления новых эндпоинтов:

1. Добавьте типы в `src/types/api.ts`
2. Создайте методы в `ApiService`
3. Используйте в компонентах

## Лицензия

Apache 2.0

## Поддержка

По вопросам и предложениям обращайтесь к команде разработки.
